(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/xiche/index/index"],{"16a6":function(n,e,i){"use strict";i.r(e);var o=i("e058"),t=i("98eb");for(var a in t)"default"!==a&&function(n){i.d(e,n,(function(){return t[n]}))}(a);i("efa7");var c,l=i("f0c5"),u=Object(l["a"])(t["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);e["default"]=u.exports},"2baf":function(n,e,i){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={components:{},data:function(){return{cheliang_list:[],dingdan_list:[],a:"",chongzhi_jine:"0",m:""}},onLoad:function(){var n=this;n.weixin_logn(),console.log(getApp().globalData.public_server_url)},methods:{userPayBtn:function(e){console.log(e);var i=1;null!=e.carwService&&(i=2);var o={price:e.totalFee,payState:i,orderUid:e.orderUid,discountedPrice:e.discountedPrice};console.log("data2",o);var t=this;0==o.price?n.showModal({title:"提示",content:"是否进行付款？",success:function(e){e.confirm?(console.log("用户点击确定"),t.wangluo_qingqiu("/wx/pay/payZero",o,!0,!0,"POST").then((function(e){console.log(e),e&&n.showModal({title:"提示",content:"支付成功。",confirmText:"知道了",showCancel:!1,success:function(n){t.huoqu_fuwu_liebiao()}})}))):e.cancel&&console.log("用户点击取消")}.bind(this)}):t.wangluo_qingqiu("/wx/pay/sendipmsfeecharge",o,!0,!0,"POST").then((function(e){e&&(console.log("sendipmsfeecharge"),console.log(e),n.requestPayment({provider:"wxpay",timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,success:function(n){console.log(n),t.huoqu_fuwu_liebiao()},fail:function(e){console.log("err"),console.log(e),n.showModal({title:"注意",content:"取消支付。",confirmText:"知道了",showCancel:!1,success:function(n){}})}}))}))},chakan_yue:function(){if(1==getApp().globalData.xinxi){var n=this;n.wangluo_qingqiu("/wx/carw/userBalance",null,!0,!0,"GET").then((function(n){console.log("userBalance"),console.log(n),getApp().globalData.public_yonghu_yue=n}))}},showModal:function(n){this.a=n.currentTarget.dataset.target,console.log(this.a)},hideModal:function(n){this.a=null},weixin_logn:function(){var e=this;n.login({provider:"weixin",success:function(i){var o={code:i.code};console.log("data",o),e.wangluo_qingqiu("/wx/user/login",o,!1,!0,"GET").then((function(i){i&&(console.log("/wx/user/login"),console.log(i),getApp().globalData.public_user_token=i.token,console.log(i.token),getApp().globalData.public_login_status=!0,getApp().globalData.public_user_phone=i.has_phone,1==i.special_value?getApp().globalData.public_wxapp_type=!0:getApp().globalData.public_wxapp_type=!1,e.wangluo_qingqiu("/wx/carw/checkUserInfo",null,!0,!0,"GET").then((function(e){console.log("q"),console.log(e);0!=e?(console.log("a"),getApp().globalData.xinxi=0,console.log(getApp().globalData.xinxi),n.switchTab({url:"../../index_4/index_4"})):0==e&&(getApp().globalData.xinxi=1)})),e.huoqu_souye_xinxi())}))}})},huoqu_souye_xinxi:function(){this.huoqu_chepai_liebiao(),this.huoqu_fuwu_liebiao(),this.chakan_yue()},huoqu_chepai_liebiao:function(){var n=this;n.wangluo_qingqiu("/wx/carw/getCar",null,!0,!0,"GET").then((function(e){e&&(n.cheliang_list=e,console.log("车辆"),console.log(e))}))},tishi:function(){n.showModal({titile:"提示",content:"敬请期待",success:function(){n.navigateBack({})}})},tiaozhuan_xinzheng_chepai:function(){0==getApp().globalData.xinxi?n.showModal({title:"提示",content:"请登录",success:function(e){e.confirm?n.switchTab({url:"../../index_4/index_4"}):e.cancel}}):1==getApp().globalData.xinxi&&(0==this.cheliang_list.length?n.navigateTo({url:"../xinzheng_chepai/xinzheng_chepai"}):n.navigateTo({url:"/pages/modular/baoxiu_list/baoxiu_list"}))},tiaozhuan_xinzheng_dingdan:function(){if(0==getApp().globalData.xinxi)n.showModal({title:"提示",content:"请登录",success:function(e){e.confirm?n.switchTab({url:"../../index_4/index_4"}):e.cancel}});else if(this.cheliang_list.length>0){var e=this;getApp().globalData.public_yonghu_yue<0&&(e.a=1,console.log(e.a)),getApp().globalData.public_yonghu_yue>=0&&n.navigateTo({url:"../xinzheng_dingdan/xinzheng_dingdan"})}else n.showModal({title:"提示",content:"暂车辆信息，请先添加车辆信息。",showCancel:!1,success:function(){n.navigateTo({url:"../xinzheng_chepai/xinzheng_chepai?id=1"})}})},shuru_jine:function(n){console.log(n.detail.value),this.chongzhi_jine=n.detail.value},dianji:function(n){1==n.detail.value?this.m=1:(this.chongzhi_jine=n.detail.value,this.m=0)},weixin_zhifu:function(){this.hideModal();var e=this,i={num:e.chongzhi_jine};if(console.log(i),!/(^[1-9]\d*$)/.test(e.chongzhi_jine))return n.showModal({title:"提示",content:"请输入大于50的整数金额",showCancel:!1,success:function(){}}),!1;e.chongzhi_jine>=50?e.wangluo_qingqiu("/wx/pay/sendipmsfeecharge",i,!0,!0,"POST").then((function(i){i&&(console.log("myBalanceRecharge"),console.log(i),e.orderNumber=i.orderNumber,n.requestPayment({provider:"wxpay",timeStamp:i.timeStamp,nonceStr:i.nonceStr,package:i.package,signType:i.signType,paySign:i.paySign,success:function(n){console.log(n)},fail:function(e){console.log("err"),console.log(e),n.showModal({title:"注意",content:"取消支付。",confirmText:"知道了",showCancel:!1,success:function(n){}})}}))})):n.showModal({title:"提示",content:"请输入大于50的整数金额",showCancel:!1,success:function(){}})},huoqu_fuwu_liebiao:function(){var n=this;n.wangluo_qingqiu("/wx/carw/getOrdering",null,!0,!0,"GET").then((function(e){if(e){console.log("订单"),console.log(e),n.dingdan_list=e;for(var i=0;i<e.length;i++){var o=e[i],t=0;if(null!=o.carwCondition){for(var a=0,c=0;c<o.carwCondition.services.length;c++)a=Number(a)+Number(o.carwCondition.services[c].servicePrice);2==o.tradeState?(n.dingdan_list[i].discountedPrice=o.discountedPrice,t=Number(a)-Number(o.discountedPrice)):(n.dingdan_list[i].discountedPrice=0,"晨夜会员"==o.cardName?(n.dingdan_list[i].discountedPrice=Number(.12*a).toFixed(2),t=Number(a)-Number(.12*a)):t=Number(a))}if(null!=o.carwService){for(var l=0,u=0;u<o.carwService.projects.length;u++)l=Number(l)+Number(o.carwService.projects[u].price);1!=o.payState&&(t=Number(t)+Number(l))}t=t.toFixed(2),n.dingdan_list[i].totalFee=t}}}))},boda_dianhua:function(e){n.makePhoneCall({phoneNumber:e[0]})},dingdan_xiangqing:function(e,i){console.log(e,i),n.navigateTo({url:"../dingdan_xiangqing/dingdan_xiangqing?orderId="+e})}},onShareAppMessage:function(n){return{title:"晨夜车管家",path:"/pages/xiche/index/index",imageUrl:"/static/img/logo.jpg"}},onShow:function(){getApp().globalData.public_login_status&&(this.huoqu_chepai_liebiao(),this.huoqu_souye_xinxi())}};e.default=i}).call(this,i("543d")["default"])},"6b01":function(n,e,i){},"98eb":function(n,e,i){"use strict";i.r(e);var o=i("2baf"),t=i.n(o);for(var a in o)"default"!==a&&function(n){i.d(e,n,(function(){return o[n]}))}(a);e["default"]=t.a},c625:function(n,e,i){"use strict";(function(n){i("0db0");o(i("66fd"));var e=o(i("16a6"));function o(n){return n&&n.__esModule?n:{default:n}}wx.__webpack_require_UNI_MP_PLUGIN__=i,n(e.default)}).call(this,i("543d")["createPage"])},e058:function(n,e,i){"use strict";var o;i.d(e,"b",(function(){return t})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return o}));var t=function(){var n=this,e=n.$createElement;n._self._c},a=[]},efa7:function(n,e,i){"use strict";var o=i("6b01"),t=i.n(o);t.a}},[["c625","common/runtime","common/vendor"]]]);